# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'DatabaseHelper.ui'
#
# Created by: PyQt5 UI code generator 5.15.6
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

import psycopg2
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QTableWidgetItem


class Ui_MainWindow(object):
    conn = psycopg2.connect(database="DatabaseHelper",
                            user="postgres",
                            password="23501690",
                            host="localhost",
                            port="5432")
    cursor = conn.cursor()

    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.setEnabled(True)
        MainWindow.setFixedSize(800, 600)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.mainFrame = QtWidgets.QFrame(self.centralwidget)
        self.mainFrame.setGeometry(QtCore.QRect(10, 40, 780, 550))
        self.mainFrame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.mainFrame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.mainFrame.setObjectName("mainFrame")
        self.label = QtWidgets.QLabel(self.mainFrame)
        self.label.setGeometry(QtCore.QRect(470, 490, 300, 50))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.mainFrame)
        self.label_2.setEnabled(True)
        self.label_2.setGeometry(QtCore.QRect(20, 10, 740, 270))
        font = QtGui.QFont()
        font.setFamily("Ubuntu Condensed")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.mainButton = QtWidgets.QPushButton(self.centralwidget, clicked=lambda: self.openFrame(self.mainFrame))
        self.mainButton.setGeometry(QtCore.QRect(10, 10, 89, 25))
        self.mainButton.setObjectName("mainButton")
        self.timeTableFrame = QtWidgets.QFrame(self.centralwidget)
        self.timeTableFrame.setGeometry(QtCore.QRect(10, 40, 780, 550))
        self.timeTableFrame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.timeTableFrame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.timeTableFrame.setObjectName("timeTableFrame")
        self.updateTableTimeTableButton = QtWidgets.QPushButton(self.timeTableFrame, clicked=lambda: self.updateTable(self.tableTimeTableWidget))
        self.updateTableTimeTableButton.setGeometry(QtCore.QRect(440, 480, 150, 60))
        self.updateTableTimeTableButton.setObjectName("updateTableTimeTableButton")
        self.tableTimeTableWidget = QtWidgets.QTableWidget(self.timeTableFrame)
        self.tableTimeTableWidget.setGeometry(QtCore.QRect(90, 100, 621, 341))
        self.tableTimeTableWidget.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.tableTimeTableWidget.setAutoFillBackground(False)
        self.tableTimeTableWidget.setObjectName("tableTimeTableWidget")
        self.tableTimeTableWidget.setColumnCount(6)
        self.tableTimeTableWidget.setRowCount(0)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(1, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(2, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(3, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(4, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTimeTableWidget.setHorizontalHeaderItem(5, item)
        self.label_3 = QtWidgets.QLabel(self.timeTableFrame)
        self.label_3.setGeometry(QtCore.QRect(350, 30, 91, 51))
        font = QtGui.QFont()
        font.setFamily("Ubuntu Condensed")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.label_3.setObjectName("label_3")
        self.createTableTimeTableButton = QtWidgets.QPushButton(self.timeTableFrame)
        self.createTableTimeTableButton.setGeometry(QtCore.QRect(610, 480, 150, 60))
        self.createTableTimeTableButton.setObjectName("createTableTimeTableButton")
        self.exitButton = QtWidgets.QPushButton(self.centralwidget, clicked=lambda: self.closeProg())
        self.exitButton.setGeometry(QtCore.QRect(690, 10, 89, 25))
        self.exitButton.setObjectName("exitButton")
        self.teachersFrame = QtWidgets.QFrame(self.centralwidget)
        self.teachersFrame.setGeometry(QtCore.QRect(10, 40, 780, 550))
        self.teachersFrame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.teachersFrame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.teachersFrame.setObjectName("teachersFrame")
        self.updateTableTeachersButton = QtWidgets.QPushButton(self.teachersFrame, clicked=lambda: self.updateTable(self.tableTeachersWidget))
        self.updateTableTeachersButton.setGeometry(QtCore.QRect(440, 480, 150, 60))
        self.updateTableTeachersButton.setObjectName("updateTableTeachersButton")
        self.tableTeachersWidget = QtWidgets.QTableWidget(self.teachersFrame)
        self.tableTeachersWidget.setGeometry(QtCore.QRect(90, 100, 621, 341))
        self.tableTeachersWidget.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.tableTeachersWidget.setAutoFillBackground(False)
        self.tableTeachersWidget.setObjectName("tableTeachersWidget")
        self.tableTeachersWidget.setColumnCount(2)
        self.tableTeachersWidget.setRowCount(0)
        item = QtWidgets.QTableWidgetItem()
        self.tableTeachersWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableTeachersWidget.setHorizontalHeaderItem(1, item)
        self.label_4 = QtWidgets.QLabel(self.teachersFrame)
        self.label_4.setGeometry(QtCore.QRect(350, 30, 91, 51))
        font = QtGui.QFont()
        font.setFamily("Ubuntu Condensed")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.label_4.setObjectName("label_4")
        self.createTeachersButton = QtWidgets.QPushButton(self.teachersFrame)
        self.createTeachersButton.setGeometry(QtCore.QRect(610, 480, 150, 60))
        self.createTeachersButton.setObjectName("createTeachersButton")
        self.timeTableButton = QtWidgets.QPushButton(self.centralwidget,
                                                     clicked=lambda: self.openFrame(self.timeTableFrame))
        self.timeTableButton.setGeometry(QtCore.QRect(110, 10, 89, 25))
        self.timeTableButton.setObjectName("timeTableButton")
        self.teachersButton = QtWidgets.QPushButton(self.centralwidget,
                                                    clicked=lambda: self.openFrame(self.teachersFrame))
        self.teachersButton.setGeometry(QtCore.QRect(210, 10, 89, 25))
        self.teachersButton.setObjectName("teachersButton")


        self.delteButton = QtWidgets.QPushButton(self.centralwidget)
        self.teachersButton.setGeometry(QtCore.QRect(210, 10, 89, 25))
        self.teachersButton.setObjectName("delteButton")

        self.notesFrame = QtWidgets.QFrame(self.centralwidget)
        self.notesFrame.setGeometry(QtCore.QRect(10, 40, 780, 550))
        self.notesFrame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.notesFrame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.notesFrame.setObjectName("notesFrame")
        self.updateTableNotesButton = QtWidgets.QPushButton(self.notesFrame, clicked=lambda: self.updateTable(self.tableNotesWidget))
        self.updateTableNotesButton.setGeometry(QtCore.QRect(440, 480, 150, 60))
        self.updateTableNotesButton.setObjectName("updateTableNotesButton")
        self.tableNotesWidget = QtWidgets.QTableWidget(self.notesFrame)
        self.tableNotesWidget.setGeometry(QtCore.QRect(90, 100, 621, 341))
        self.tableNotesWidget.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.tableNotesWidget.setAutoFillBackground(False)
        self.tableNotesWidget.setObjectName("tableNotesWidget")
        self.tableNotesWidget.setColumnCount(2)
        self.tableNotesWidget.setRowCount(0)
        item = QtWidgets.QTableWidgetItem()
        self.tableNotesWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableNotesWidget.setHorizontalHeaderItem(1, item)
        self.label_5 = QtWidgets.QLabel(self.notesFrame)
        self.label_5.setGeometry(QtCore.QRect(370, 30, 91, 51))
        font = QtGui.QFont()
        font.setFamily("Ubuntu Condensed")
        font.setPointSize(18)
        font.setBold(True)
        font.setWeight(75)
        self.label_5.setFont(font)
        self.label_5.setLayoutDirection(QtCore.Qt.LeftToRight)
        self.label_5.setObjectName("label_5")
        self.createNotesButton = QtWidgets.QPushButton(self.notesFrame)
        self.createNotesButton.setGeometry(QtCore.QRect(610, 480, 150, 60))
        self.createNotesButton.setObjectName("createNotesButton")
        self.notesButton = QtWidgets.QPushButton(self.centralwidget, clicked=lambda: self.openFrame(self.notesFrame))
        self.notesButton.setGeometry(QtCore.QRect(310, 10, 89, 25))
        self.notesButton.setObjectName("notesButton")
        MainWindow.setCentralWidget(self.centralwidget)
        self.timeTableFrame.setVisible(False)
        self.notesFrame.setVisible(False)
        self.teachersFrame.setVisible(False)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def updateTable(self, table):
        if table == self.tableNotesWidget:
            self.notesFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.notes;")
            records = list(self.cursor.fetchall())
            self.tableNotesWidget.setRowCount(len(records))
            print(records, "notes")
            for i, r in enumerate(records):
                self.tableNotesWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableNotesWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
        elif table == self.tableTeachersWidget:
            self.teachersFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.teachers;")
            records = list(self.cursor.fetchall())
            self.tableTeachersWidget.setRowCount(len(records))
            print(records, "teachers")
            for i, r in enumerate(records):
                self.tableTeachersWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableTeachersWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
        elif table == self.tableTimeTableWidget:
            self.timeTableFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.timetable;")
            records = list(self.cursor.fetchall())
            self.tableTimeTableWidget.setRowCount(len(records))
            print(records, "timetable")
            for i, r in enumerate(records):
                self.tableTimeTableWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableTimeTableWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
                self.tableTimeTableWidget.setItem(i, 2, QTableWidgetItem(str(records[i][2])))
                self.tableTimeTableWidget.setItem(i, 3, QTableWidgetItem(str(records[i][3])))

    def openFrame(self, frame):
        self.mainFrame.setVisible(False)
        self.notesFrame.setVisible(False)
        self.teachersFrame.setVisible(False)
        self.timeTableFrame.setVisible(False)
        if frame == self.notesFrame:
            self.notesFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.notes;")
            records = list(self.cursor.fetchall())
            self.tableNotesWidget.setRowCount(len(records))
            print(records, "notes")
            for i, r in enumerate(records):
                self.tableNotesWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableNotesWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
        elif frame == self.teachersFrame:
            self.teachersFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.teachers;")
            records = list(self.cursor.fetchall())
            self.tableTeachersWidget.setRowCount(len(records))
            print(records, "teachers")
            for i, r in enumerate(records):
                self.tableTeachersWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableTeachersWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
        elif frame == self.timeTableFrame:
            self.timeTableFrame.setVisible(True)
            self.cursor.execute("SELECT * FROM public.timetable;")
            records = list(self.cursor.fetchall())
            self.tableTimeTableWidget.setRowCount(len(records))
            print(records, "timetable")
            for i, r in enumerate(records):
                self.tableTimeTableWidget.setItem(i, 0, QTableWidgetItem(str(records[i][0])))
                self.tableTimeTableWidget.setItem(i, 1, QTableWidgetItem(str(records[i][1])))
                self.tableTimeTableWidget.setItem(i, 2, QTableWidgetItem(str(records[i][2])))
                self.tableTimeTableWidget.setItem(i, 3, QTableWidgetItem(str(records[i][3])))
                self.tableTimeTableWidget.setCellWidget(i, 4, self.delteButton)
                self.tableTimeTableWidget.setCellWidget(i, 5, self.delteButton)
        else:
            self.mainFrame.setVisible(True)

    def closeProg(self):
        sys.exit()

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "DatabaseHelper"))
        self.label.setText(_translate("MainWindow", "БИН2106 Гуролев Владислав"))
        self.label_2.setText(
            _translate("MainWindow", "Лабораторная работа №8: Создание визуального интерфейса для базы данных"))
        self.mainButton.setText(_translate("MainWindow", "Main"))
        self.updateTableTimeTableButton.setText(_translate("MainWindow", "Update"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(0)
        item.setText(_translate("MainWindow", "title"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(1)
        item.setText(_translate("MainWindow", "day"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(2)
        item.setText(_translate("MainWindow", "time"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(3)
        item.setText(_translate("MainWindow", "room"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(4)
        item.setText(_translate("MainWindow", "edit"))
        item = self.tableTimeTableWidget.horizontalHeaderItem(5)
        item.setText(_translate("MainWindow", "delete"))
        self.label_3.setText(_translate("MainWindow", "TimeTable"))
        self.createTableTimeTableButton.setText(_translate("MainWindow", "Create"))
        self.exitButton.setText(_translate("MainWindow", "exit"))
        self.updateTableTeachersButton.setText(_translate("MainWindow", "Update"))
        item = self.tableTeachersWidget.horizontalHeaderItem(0)
        item.setText(_translate("MainWindow", "Name"))
        item = self.tableTeachersWidget.horizontalHeaderItem(1)
        item.setText(_translate("MainWindow", "Main Room"))
        self.label_4.setText(_translate("MainWindow", "Teachers"))
        self.createTeachersButton.setText(_translate("MainWindow", "Create"))
        self.timeTableButton.setText(_translate("MainWindow", "TimeTable"))
        self.teachersButton.setText(_translate("MainWindow", "Teachers"))
        self.updateTableNotesButton.setText(_translate("MainWindow", "Update"))
        item = self.tableNotesWidget.horizontalHeaderItem(0)
        item.setText(_translate("MainWindow", "title"))
        item = self.tableNotesWidget.horizontalHeaderItem(1)
        item.setText(_translate("MainWindow", "description"))
        self.label_5.setText(_translate("MainWindow", "Notes"))
        self.createNotesButton.setText(_translate("MainWindow", "Create"))
        self.notesButton.setText(_translate("MainWindow", "Notes"))


if __name__ == "__main__":
    import sys

    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
